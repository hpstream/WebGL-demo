function jt(r){if(!!r&&typeof window!="undefined"){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=r,document.head.appendChild(t),r}}function U(r,t){var e=r.__state.conversionName.toString(),n=Math.round(r.r),i=Math.round(r.g),s=Math.round(r.b),a=r.a,o=Math.round(r.h),h=r.s.toFixed(1),u=r.v.toFixed(1);if(t||e==="THREE_CHAR_HEX"||e==="SIX_CHAR_HEX"){for(var d=r.hex.toString(16);d.length<6;)d="0"+d;return"#"+d}else{if(e==="CSS_RGB")return"rgb("+n+","+i+","+s+")";if(e==="CSS_RGBA")return"rgba("+n+","+i+","+s+","+a+")";if(e==="HEX")return"0x"+r.hex.toString(16);if(e==="RGB_ARRAY")return"["+n+","+i+","+s+"]";if(e==="RGBA_ARRAY")return"["+n+","+i+","+s+","+a+"]";if(e==="RGB_OBJ")return"{r:"+n+",g:"+i+",b:"+s+"}";if(e==="RGBA_OBJ")return"{r:"+n+",g:"+i+",b:"+s+",a:"+a+"}";if(e==="HSV_OBJ")return"{h:"+o+",s:"+h+",v:"+u+"}";if(e==="HSVA_OBJ")return"{h:"+o+",s:"+h+",v:"+u+",a:"+a+"}"}return"unknown format"}var St=Array.prototype.forEach,G=Array.prototype.slice,p={BREAK:{},extend:function(t){return this.each(G.call(arguments,1),function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach(function(i){this.isUndefined(e[i])||(t[i]=e[i])}.bind(this))},this),t},defaults:function(t){return this.each(G.call(arguments,1),function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach(function(i){this.isUndefined(t[i])&&(t[i]=e[i])}.bind(this))},this),t},compose:function(){var t=G.call(arguments);return function(){for(var e=G.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(!!t){if(St&&t.forEach&&t.forEach===St)t.forEach(e,n);else if(t.length===t.length+0){var i=void 0,s=void 0;for(i=0,s=t.length;i<s;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var a in t)if(e.call(n,t[a],a)===this.BREAK)return}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i=void 0;return function(){var s=this,a=arguments;function o(){i=null,n||t.apply(s,a)}var h=n||!i;clearTimeout(i),i=setTimeout(o,e),h&&t.apply(s,a)}},toArray:function(t){return t.toArray?t.toArray():G.call(t)},isUndefined:function(t){return t===void 0},isNull:function(t){return t===null},isNaN:function(r){function t(e){return r.apply(this,arguments)}return t.toString=function(){return r.toString()},t}(function(r){return isNaN(r)}),isArray:Array.isArray||function(r){return r.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return t instanceof Function}},qt=[{litmus:p.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:U},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:U},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:U},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:U}}},{litmus:p.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:p.isArray,conversions:{RGB_ARRAY:{read:function(t){return t.length!==3?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return t.length!==4?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:p.isObject,conversions:{RGBA_OBJ:{read:function(t){return p.isNumber(t.r)&&p.isNumber(t.g)&&p.isNumber(t.b)&&p.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return p.isNumber(t.r)&&p.isNumber(t.g)&&p.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return p.isNumber(t.h)&&p.isNumber(t.s)&&p.isNumber(t.v)&&p.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return p.isNumber(t.h)&&p.isNumber(t.s)&&p.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],$=void 0,lt=void 0,gt=function(){lt=!1;var t=arguments.length>1?p.toArray(arguments):arguments[0];return p.each(qt,function(e){if(e.litmus(t))return p.each(e.conversions,function(n,i){if($=n.read(t),lt===!1&&$!==!1)return lt=$,$.conversionName=i,$.conversion=n,p.BREAK}),p.BREAK}),lt},At=void 0,ct={hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,s=t/60-Math.floor(t/60),a=n*(1-e),o=n*(1-s*e),h=n*(1-(1-s)*e),u=[[n,h,a],[o,n,a],[a,n,h],[a,o,n],[h,a,n],[n,a,o]][i];return{r:u[0]*255,g:u[1]*255,b:u[2]*255}},rgb_to_hsv:function(t,e,n){var i=Math.min(t,e,n),s=Math.max(t,e,n),a=s-i,o=void 0,h=void 0;if(s!==0)h=a/s;else return{h:NaN,s:0,v:0};return t===s?o=(e-n)/a:e===s?o=2+(n-t)/a:o=4+(t-e)/a,o/=6,o<0&&(o+=1),{h:o*360,s:h,v:s/255}},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n),i},component_from_hex:function(t,e){return t>>e*8&255},hex_with_component:function(t,e,n){return n<<(At=e*8)|t&~(255<<At)}},Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},O=function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")},T=function(){function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),N=function r(t,e,n){t===null&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(i===void 0){var s=Object.getPrototypeOf(t);return s===null?void 0:r(s,e,n)}else{if("value"in i)return i.value;var a=i.get;return a===void 0?void 0:a.call(n)}},H=function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)},B=function(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r},z=function(){function r(){if(O(this,r),this.__state=gt.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return T(r,[{key:"toString",value:function(){return U(this)}},{key:"toHexString",value:function(){return U(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),r}();function Ct(r,t,e){Object.defineProperty(r,t,{get:function(){return this.__state.space==="RGB"?this.__state[t]:(z.recalculateRGB(this,t,e),this.__state[t])},set:function(i){this.__state.space!=="RGB"&&(z.recalculateRGB(this,t,e),this.__state.space="RGB"),this.__state[t]=i}})}function Et(r,t){Object.defineProperty(r,t,{get:function(){return this.__state.space==="HSV"?this.__state[t]:(z.recalculateHSV(this),this.__state[t])},set:function(n){this.__state.space!=="HSV"&&(z.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=n}})}z.recalculateRGB=function(r,t,e){if(r.__state.space==="HEX")r.__state[t]=ct.component_from_hex(r.__state.hex,e);else if(r.__state.space==="HSV")p.extend(r.__state,ct.hsv_to_rgb(r.__state.h,r.__state.s,r.__state.v));else throw new Error("Corrupted color state")};z.recalculateHSV=function(r){var t=ct.rgb_to_hsv(r.r,r.g,r.b);p.extend(r.__state,{s:t.s,v:t.v}),p.isNaN(t.h)?p.isUndefined(r.__state.h)&&(r.__state.h=0):r.__state.h=t.h};z.COMPONENTS=["r","g","b","h","s","v","hex","a"];Ct(z.prototype,"r",2);Ct(z.prototype,"g",1);Ct(z.prototype,"b",0);Et(z.prototype,"h");Et(z.prototype,"s");Et(z.prototype,"v");Object.defineProperty(z.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}});Object.defineProperty(z.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=ct.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var P=function(){function r(t,e){O(this,r),this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0}return T(r,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),r}(),Wt={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},Pt={};p.each(Wt,function(r,t){p.each(r,function(e){Pt[e]=t})});var Zt=/(\d+(\.\d+)?)px/;function R(r){if(r==="0"||p.isUndefined(r))return 0;var t=r.match(Zt);return p.isNull(t)?0:parseFloat(t[1])}var c={makeSelectable:function(t,e){t===void 0||t.style===void 0||(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var i=n,s=e;p.isUndefined(s)&&(s=!0),p.isUndefined(i)&&(i=!0),t.style.position="absolute",s&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,i){var s=n||{},a=Pt[e];if(!a)throw new Error("Event type "+e+" not supported.");var o=document.createEvent(a);switch(a){case"MouseEvents":{var h=s.x||s.clientX||0,u=s.y||s.clientY||0;o.initMouseEvent(e,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,h,u,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var d=o.initKeyboardEvent||o.initKeyEvent;p.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(e,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:{o.initEvent(e,s.bubbles||!1,s.cancelable||!0);break}}p.defaults(o,i),t.dispatchEvent(o)},bind:function(t,e,n,i){var s=i||!1;return t.addEventListener?t.addEventListener(e,n,s):t.attachEvent&&t.attachEvent("on"+e,n),c},unbind:function(t,e,n,i){var s=i||!1;return t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent&&t.detachEvent("on"+e,n),c},addClass:function(t,e){if(t.className===void 0)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);n.indexOf(e)===-1&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return c},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);i!==-1&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return c},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return R(e["border-left-width"])+R(e["border-right-width"])+R(e["padding-left"])+R(e["padding-right"])+R(e.width)},getHeight:function(t){var e=getComputedStyle(t);return R(e["border-top-width"])+R(e["border-bottom-width"])+R(e["padding-top"])+R(e["padding-bottom"])+R(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},Vt=function(r){H(t,r);function t(e,n){O(this,t);var i=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=i;i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox");function a(){s.setValue(!s.__prev)}return c.bind(i.__checkbox,"change",a,!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return T(t,[{key:"setValue",value:function(n){var i=N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(P),Kt=function(r){H(t,r);function t(e,n,i){O(this,t);var s=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=i,o=s;if(s.__select=document.createElement("select"),p.isArray(a)){var h={};p.each(a,function(u){h[u]=u}),a=h}return p.each(a,function(u,d){var l=document.createElement("option");l.innerHTML=d,l.setAttribute("value",u),o.__select.appendChild(l)}),s.updateDisplay(),c.bind(s.__select,"change",function(){var u=this.options[this.selectedIndex].value;o.setValue(u)}),s.domElement.appendChild(s.__select),s}return T(t,[{key:"setValue",value:function(n){var i=N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return c.isActive(this.__select)?this:(this.__select.value=this.getValue(),N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(P),Jt=function(r){H(t,r);function t(e,n){O(this,t);var i=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=i;function a(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),c.bind(i.__input,"keyup",a),c.bind(i.__input,"change",a),c.bind(i.__input,"blur",o),c.bind(i.__input,"keydown",function(h){h.keyCode===13&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return T(t,[{key:"updateDisplay",value:function(){return c.isActive(this.__input)||(this.__input.value=this.getValue()),N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(P);function kt(r){var t=r.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var Dt=function(r){H(t,r);function t(e,n,i){O(this,t);var s=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=i||{};return s.__min=a.min,s.__max=a.max,s.__step=a.step,p.isUndefined(s.__step)?s.initialValue===0?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=kt(s.__impliedStep),s}return T(t,[{key:"setValue",value:function(n){var i=n;return this.__min!==void 0&&i<this.__min?i=this.__min:this.__max!==void 0&&i>this.__max&&(i=this.__max),this.__step!==void 0&&i%this.__step!==0&&(i=Math.round(i/this.__step)*this.__step),N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(n){return this.__min=n,this}},{key:"max",value:function(n){return this.__max=n,this}},{key:"step",value:function(n){return this.__step=n,this.__impliedStep=n,this.__precision=kt(n),this}}]),t}(P);function te(r,t){var e=Math.pow(10,t);return Math.round(r*e)/e}var _t=function(r){H(t,r);function t(e,n,i){O(this,t);var s=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));s.__truncationSuspended=!1;var a=s,o=void 0;function h(){var m=parseFloat(a.__input.value);p.isNaN(m)||a.setValue(m)}function u(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function d(){u()}function l(m){var g=o-m.clientY;a.setValue(a.getValue()+g*a.__impliedStep),o=m.clientY}function _(){c.unbind(window,"mousemove",l),c.unbind(window,"mouseup",_),u()}function f(m){c.bind(window,"mousemove",l),c.bind(window,"mouseup",_),o=m.clientY}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),c.bind(s.__input,"change",h),c.bind(s.__input,"blur",d),c.bind(s.__input,"mousedown",f),c.bind(s.__input,"keydown",function(m){m.keyCode===13&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,u())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return T(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():te(this.getValue(),this.__precision),N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Dt);function Mt(r,t,e,n,i){return n+(i-n)*((r-t)/(e-t))}var yt=function(r){H(t,r);function t(e,n,i,s,a){O(this,t);var o=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:i,max:s,step:a})),h=o;o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),c.bind(o.__background,"mousedown",u),c.bind(o.__background,"touchstart",_),c.addClass(o.__background,"slider"),c.addClass(o.__foreground,"slider-fg");function u(g){document.activeElement.blur(),c.bind(window,"mousemove",d),c.bind(window,"mouseup",l),d(g)}function d(g){g.preventDefault();var b=h.__background.getBoundingClientRect();return h.setValue(Mt(g.clientX,b.left,b.right,h.__min,h.__max)),!1}function l(){c.unbind(window,"mousemove",d),c.unbind(window,"mouseup",l),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function _(g){g.touches.length===1&&(c.bind(window,"touchmove",f),c.bind(window,"touchend",m),f(g))}function f(g){var b=g.touches[0].clientX,y=h.__background.getBoundingClientRect();h.setValue(Mt(b,y.left,y.right,h.__min,h.__max))}function m(){c.unbind(window,"touchmove",f),c.unbind(window,"touchend",m),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}return o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return T(t,[{key:"updateDisplay",value:function(){var n=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=n*100+"%",N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Dt),It=function(r){H(t,r);function t(e,n,i){O(this,t);var s=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=s;return s.__button=document.createElement("div"),s.__button.innerHTML=i===void 0?"Fire":i,c.bind(s.__button,"click",function(o){return o.preventDefault(),a.fire(),!1}),c.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return T(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(P),bt=function(r){H(t,r);function t(e,n){O(this,t);var i=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.__color=new z(i.getValue()),i.__temp=new z(0);var s=i;i.domElement=document.createElement("div"),c.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",c.bind(i.__input,"keydown",function(g){g.keyCode===13&&l.call(this)}),c.bind(i.__input,"blur",l),c.bind(i.__selector,"mousedown",function(){c.addClass(this,"drag").bind(window,"mouseup",function(){c.removeClass(s.__selector,"drag")})}),c.bind(i.__selector,"touchstart",function(){c.addClass(this,"drag").bind(window,"touchend",function(){c.removeClass(s.__selector,"drag")})});var a=document.createElement("div");p.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),p.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),p.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),p.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),p.extend(a.style,{width:"100%",height:"100%",background:"none"}),Ot(a,"top","rgba(0,0,0,0)","#000"),p.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),ne(i.__hue_field),p.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),c.bind(i.__saturation_field,"mousedown",o),c.bind(i.__saturation_field,"touchstart",o),c.bind(i.__field_knob,"mousedown",o),c.bind(i.__field_knob,"touchstart",o),c.bind(i.__hue_field,"mousedown",h),c.bind(i.__hue_field,"touchstart",h);function o(g){f(g),c.bind(window,"mousemove",f),c.bind(window,"touchmove",f),c.bind(window,"mouseup",u),c.bind(window,"touchend",u)}function h(g){m(g),c.bind(window,"mousemove",m),c.bind(window,"touchmove",m),c.bind(window,"mouseup",d),c.bind(window,"touchend",d)}function u(){c.unbind(window,"mousemove",f),c.unbind(window,"touchmove",f),c.unbind(window,"mouseup",u),c.unbind(window,"touchend",u),_()}function d(){c.unbind(window,"mousemove",m),c.unbind(window,"touchmove",m),c.unbind(window,"mouseup",d),c.unbind(window,"touchend",d),_()}function l(){var g=gt(this.value);g!==!1?(s.__color.__state=g,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function _(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}i.__saturation_field.appendChild(a),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay();function f(g){g.type.indexOf("touch")===-1&&g.preventDefault();var b=s.__saturation_field.getBoundingClientRect(),y=g.touches&&g.touches[0]||g,S=y.clientX,C=y.clientY,E=(S-b.left)/(b.right-b.left),x=1-(C-b.top)/(b.bottom-b.top);return x>1?x=1:x<0&&(x=0),E>1?E=1:E<0&&(E=0),s.__color.v=x,s.__color.s=E,s.setValue(s.__color.toOriginal()),!1}function m(g){g.type.indexOf("touch")===-1&&g.preventDefault();var b=s.__hue_field.getBoundingClientRect(),y=g.touches&&g.touches[0]||g,S=y.clientY,C=1-(S-b.top)/(b.bottom-b.top);return C>1?C=1:C<0&&(C=0),s.__color.h=C*360,s.setValue(s.__color.toOriginal()),!1}return i}return T(t,[{key:"updateDisplay",value:function(){var n=gt(this.getValue());if(n!==!1){var i=!1;p.each(z.COMPONENTS,function(o){if(!p.isUndefined(n[o])&&!p.isUndefined(this.__color.__state[o])&&n[o]!==this.__color.__state[o])return i=!0,{}},this),i&&p.extend(this.__color.__state,n)}p.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;p.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,Ot(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),p.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}}]),t}(P),ee=["-moz-","-o-","-webkit-","-ms-",""];function Ot(r,t,e,n){r.style.background="",p.each(ee,function(i){r.style.cssText+="background: "+i+"linear-gradient("+t+", "+e+" 0%, "+n+" 100%); "})}function ne(r){r.style.background="",r.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",r.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var ie={load:function(t,e){var n=e||document,i=n.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,n.getElementsByTagName("head")[0].appendChild(i)},inject:function(t,e){var n=e||document,i=document.createElement("style");i.type="text/css",i.innerHTML=t;var s=n.getElementsByTagName("head")[0];try{s.appendChild(i)}catch{}}},se=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,re=function(t,e){var n=t[e];return p.isArray(arguments[2])||p.isObject(arguments[2])?new Kt(t,e,arguments[2]):p.isNumber(n)?p.isNumber(arguments[2])&&p.isNumber(arguments[3])?p.isNumber(arguments[4])?new yt(t,e,arguments[2],arguments[3],arguments[4]):new yt(t,e,arguments[2],arguments[3]):p.isNumber(arguments[4])?new _t(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new _t(t,e,{min:arguments[2],max:arguments[3]}):p.isString(n)?new Jt(t,e):p.isFunction(n)?new It(t,e,""):p.isBoolean(n)?new Vt(t,e):null};function oe(r){setTimeout(r,1e3/60)}var ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||oe,he=function(){function r(){O(this,r),this.backgroundElement=document.createElement("div"),p.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),c.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),p.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;c.bind(this.backgroundElement,"click",function(){t.hide()})}return T(r,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),p.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,n=function i(){e.domElement.style.display="none",e.backgroundElement.style.display="none",c.unbind(e.domElement,"webkitTransitionEnd",i),c.unbind(e.domElement,"transitionend",i),c.unbind(e.domElement,"oTransitionEnd",i)};c.bind(this.domElement,"webkitTransitionEnd",n),c.bind(this.domElement,"transitionend",n),c.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-c.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-c.getHeight(this.domElement)/2+"px"}}]),r}(),le=jt(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);ie.inject(le);var Tt="dg",Rt=72,Lt=20,q="Default",X=function(){try{return!!window.localStorage}catch{return!1}}(),Y=void 0,Ft=!0,D=void 0,pt=!1,Ut=[],v=function r(t){var e=this,n=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),c.addClass(this.domElement,Tt),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=p.defaults(n,{closeOnTop:!1,autoPlace:!0,width:r.DEFAULT_WIDTH}),n=p.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),p.isUndefined(n.load)?n.load={preset:q}:n.preset&&(n.load.preset=n.preset),p.isUndefined(n.parent)&&n.hideable&&Ut.push(this),n.resizable=p.isUndefined(n.parent)&&n.resizable,n.autoPlace&&p.isUndefined(n.scrollable)&&(n.scrollable=!0);var i=X&&localStorage.getItem(I(this,"isLocal"))==="true",s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return e.parent?e.getRoot().preset:n.load.preset},set:function(_){e.parent?e.getRoot().preset=_:n.load.preset=_,_e(this),e.revert()}},width:{get:function(){return n.width},set:function(_){n.width=_,wt(e,_)}},name:{get:function(){return n.name},set:function(_){n.name=_,a&&(a.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(_){n.closed=_,n.closed?c.addClass(e.__ul,r.CLASS_CLOSED):c.removeClass(e.__ul,r.CLASS_CLOSED),this.onResize(),e.__closeButton&&(e.__closeButton.innerHTML=_?r.TEXT_OPEN:r.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return i},set:function(_){X&&(i=_,_?c.bind(window,"unload",s):c.unbind(window,"unload",s),localStorage.setItem(I(e,"isLocal"),_))}}}),p.isUndefined(n.parent)){if(this.closed=n.closed||!1,c.addClass(this.domElement,r.CLASS_MAIN),c.makeSelectable(this.domElement,!1),X&&i){e.useLocalStorage=!0;var o=localStorage.getItem(I(this,"gui"));o&&(n.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=r.TEXT_CLOSED,c.addClass(this.__closeButton,r.CLASS_CLOSE_BUTTON),n.closeOnTop?(c.addClass(this.__closeButton,r.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(c.addClass(this.__closeButton,r.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),c.bind(this.__closeButton,"click",function(){e.closed=!e.closed})}else{n.closed===void 0&&(n.closed=!0);var h=document.createTextNode(n.name);c.addClass(h,"controller-name"),a=zt(e,h);var u=function(_){return _.preventDefault(),e.closed=!e.closed,!1};c.addClass(this.__ul,r.CLASS_CLOSED),c.addClass(a,"title"),c.bind(a,"click",u),n.closed||(this.closed=!1)}n.autoPlace&&(p.isUndefined(n.parent)&&(Ft&&(D=document.createElement("div"),c.addClass(D,Tt),c.addClass(D,r.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(D),Ft=!1),D.appendChild(this.domElement),c.addClass(this.domElement,r.CLASS_AUTO_PLACE)),this.parent||wt(e,n.width)),this.__resizeHandler=function(){e.onResizeDebounced()},c.bind(window,"resize",this.__resizeHandler),c.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),c.bind(this.__ul,"transitionend",this.__resizeHandler),c.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&ce(this),s=function(){X&&localStorage.getItem(I(e,"isLocal"))==="true"&&localStorage.setItem(I(e,"gui"),JSON.stringify(e.getSaveObject()))},this.saveToLocalStorageIfPossible=s;function d(){var l=e.getRoot();l.width+=1,p.defer(function(){l.width-=1})}n.parent||d()};v.toggleHide=function(){pt=!pt,p.each(Ut,function(r){r.domElement.style.display=pt?"none":""})};v.CLASS_AUTO_PLACE="a";v.CLASS_AUTO_PLACE_CONTAINER="ac";v.CLASS_MAIN="main";v.CLASS_CONTROLLER_ROW="cr";v.CLASS_TOO_TALL="taller-than-window";v.CLASS_CLOSED="closed";v.CLASS_CLOSE_BUTTON="close-button";v.CLASS_CLOSE_TOP="close-top";v.CLASS_CLOSE_BOTTOM="close-bottom";v.CLASS_DRAG="drag";v.DEFAULT_WIDTH=245;v.TEXT_CLOSED="Close Controls";v.TEXT_OPEN="Open Controls";v._keydownHandler=function(r){document.activeElement.type!=="text"&&(r.which===Rt||r.keyCode===Rt)&&v.toggleHide()};c.bind(window,"keydown",v._keydownHandler,!1);p.extend(v.prototype,{add:function(t,e){return j(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return j(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;p.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&D.removeChild(this.domElement);var t=this;p.each(this.__folders,function(e){t.removeFolder(e)}),c.unbind(window,"keydown",v._keydownHandler,!1),Nt(this)},addFolder:function(t){if(this.__folders[t]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new v(e);this.__folders[t]=n;var i=zt(this,n.domElement);return c.addClass(i,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],Nt(t);var e=this;p.each(t.__folders,function(n){t.removeFolder(n)}),p.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=c.getOffset(t.__ul).top,n=0;p.each(t.__ul.childNodes,function(i){t.autoPlace&&i===t.__save_row||(n+=c.getHeight(i))}),window.innerHeight-e-Lt<n?(c.addClass(t.domElement,v.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-Lt+"px"):(c.removeClass(t.domElement,v.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&p.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:p.debounce(function(){this.onResize()},50),remember:function(){if(p.isUndefined(Y)&&(Y=new he,Y.domElement.innerHTML=se),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;p.each(Array.prototype.slice.call(arguments),function(e){t.__rememberedObjects.length===0&&de(t),t.__rememberedObjects.indexOf(e)===-1&&t.__rememberedObjects.push(e)}),this.autoPlace&&wt(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=ut(this)),t.folders={},p.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ut(this),xt(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[q]=ut(this,!0)),this.load.remembered[t]=ut(this),this.preset=t,vt(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){p.each(this.__controllers,function(e){this.getRoot().load.remembered?Gt(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),p.each(this.__folders,function(e){e.revert(e)}),t||xt(this.getRoot(),!1)},listen:function(t){var e=this.__listening.length===0;this.__listening.push(t),e&&$t(this.__listening)},updateDisplay:function(){p.each(this.__controllers,function(t){t.updateDisplay()}),p.each(this.__folders,function(t){t.updateDisplay()})}});function zt(r,t,e){var n=document.createElement("li");return t&&n.appendChild(t),e?r.__ul.insertBefore(n,e):r.__ul.appendChild(n),r.onResize(),n}function Nt(r){c.unbind(window,"resize",r.__resizeHandler),r.saveToLocalStorageIfPossible&&c.unbind(window,"unload",r.saveToLocalStorageIfPossible)}function xt(r,t){var e=r.__preset_select[r.__preset_select.selectedIndex];t?e.innerHTML=e.value+"*":e.innerHTML=e.value}function ue(r,t,e){if(e.__li=t,e.__gui=r,p.extend(e,{options:function(a){if(arguments.length>1){var o=e.__li.nextElementSibling;return e.remove(),j(r,e.object,e.property,{before:o,factoryArgs:[p.toArray(arguments)]})}if(p.isArray(a)||p.isObject(a)){var h=e.__li.nextElementSibling;return e.remove(),j(r,e.object,e.property,{before:h,factoryArgs:[a]})}},name:function(a){return e.__li.firstElementChild.firstElementChild.innerHTML=a,e},listen:function(){return e.__gui.listen(e),e},remove:function(){return e.__gui.remove(e),e}}),e instanceof yt){var n=new _t(e.object,e.property,{min:e.__min,max:e.__max,step:e.__step});p.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var a=e[s],o=n[s];e[s]=n[s]=function(){var h=Array.prototype.slice.call(arguments);return o.apply(n,h),a.apply(e,h)}}),c.addClass(t,"has-slider"),e.domElement.insertBefore(n.domElement,e.domElement.firstElementChild)}else if(e instanceof _t){var i=function(a){if(p.isNumber(e.__min)&&p.isNumber(e.__max)){var o=e.__li.firstElementChild.firstElementChild.innerHTML,h=e.__gui.__listening.indexOf(e)>-1;e.remove();var u=j(r,e.object,e.property,{before:e.__li.nextElementSibling,factoryArgs:[e.__min,e.__max,e.__step]});return u.name(o),h&&u.listen(),u}return a};e.min=p.compose(i,e.min),e.max=p.compose(i,e.max)}else e instanceof Vt?(c.bind(t,"click",function(){c.fakeEvent(e.__checkbox,"click")}),c.bind(e.__checkbox,"click",function(s){s.stopPropagation()})):e instanceof It?(c.bind(t,"click",function(){c.fakeEvent(e.__button,"click")}),c.bind(t,"mouseover",function(){c.addClass(e.__button,"hover")}),c.bind(t,"mouseout",function(){c.removeClass(e.__button,"hover")})):e instanceof bt&&(c.addClass(t,"color"),e.updateDisplay=p.compose(function(s){return t.style.borderLeftColor=e.__color.toString(),s},e.updateDisplay),e.updateDisplay());e.setValue=p.compose(function(s){return r.getRoot().__preset_select&&e.isModified()&&xt(r.getRoot(),!0),s},e.setValue)}function Gt(r,t){var e=r.getRoot(),n=e.__rememberedObjects.indexOf(t.object);if(n!==-1){var i=e.__rememberedObjectIndecesToControllers[n];if(i===void 0&&(i={},e.__rememberedObjectIndecesToControllers[n]=i),i[t.property]=t,e.load&&e.load.remembered){var s=e.load.remembered,a=void 0;if(s[r.preset])a=s[r.preset];else if(s[q])a=s[q];else return;if(a[n]&&a[n][t.property]!==void 0){var o=a[n][t.property];t.initialValue=o,t.setValue(o)}}}}function j(r,t,e,n){if(t[e]===void 0)throw new Error('Object "'+t+'" has no property "'+e+'"');var i=void 0;if(n.color)i=new bt(t,e);else{var s=[t,e].concat(n.factoryArgs);i=re.apply(r,s)}n.before instanceof P&&(n.before=n.before.__li),Gt(r,i),c.addClass(i.domElement,"c");var a=document.createElement("span");c.addClass(a,"property-name"),a.innerHTML=i.property;var o=document.createElement("div");o.appendChild(a),o.appendChild(i.domElement);var h=zt(r,o,n.before);return c.addClass(h,v.CLASS_CONTROLLER_ROW),i instanceof bt?c.addClass(h,"color"):c.addClass(h,Qt(i.getValue())),ue(r,h,i),r.__controllers.push(i),i}function I(r,t){return document.location.href+"."+t}function vt(r,t,e){var n=document.createElement("option");n.innerHTML=t,n.value=t,r.__preset_select.appendChild(n),e&&(r.__preset_select.selectedIndex=r.__preset_select.length-1)}function Ht(r,t){t.style.display=r.useLocalStorage?"block":"none"}function de(r){var t=r.__save_row=document.createElement("li");c.addClass(r.domElement,"has-save"),r.__ul.insertBefore(t,r.__ul.firstChild),c.addClass(t,"save-row");var e=document.createElement("span");e.innerHTML="&nbsp;",c.addClass(e,"button gears");var n=document.createElement("span");n.innerHTML="Save",c.addClass(n,"button"),c.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New",c.addClass(i,"button"),c.addClass(i,"save-as");var s=document.createElement("span");s.innerHTML="Revert",c.addClass(s,"button"),c.addClass(s,"revert");var a=r.__preset_select=document.createElement("select");if(r.load&&r.load.remembered?p.each(r.load.remembered,function(l,_){vt(r,_,_===r.preset)}):vt(r,q,!1),c.bind(a,"change",function(){for(var l=0;l<r.__preset_select.length;l++)r.__preset_select[l].innerHTML=r.__preset_select[l].value;r.preset=this.value}),t.appendChild(a),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(s),X){var o=document.getElementById("dg-local-explain"),h=document.getElementById("dg-local-storage"),u=document.getElementById("dg-save-locally");u.style.display="block",localStorage.getItem(I(r,"isLocal"))==="true"&&h.setAttribute("checked","checked"),Ht(r,o),c.bind(h,"change",function(){r.useLocalStorage=!r.useLocalStorage,Ht(r,o)})}var d=document.getElementById("dg-new-constructor");c.bind(d,"keydown",function(l){l.metaKey&&(l.which===67||l.keyCode===67)&&Y.hide()}),c.bind(e,"click",function(){d.innerHTML=JSON.stringify(r.getSaveObject(),void 0,2),Y.show(),d.focus(),d.select()}),c.bind(n,"click",function(){r.save()}),c.bind(i,"click",function(){var l=prompt("Enter a new preset name.");l&&r.saveAs(l)}),c.bind(s,"click",function(){r.revert()})}function ce(r){var t=void 0;r.__resize_handle=document.createElement("div"),p.extend(r.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function e(s){return s.preventDefault(),r.width+=t-s.clientX,r.onResize(),t=s.clientX,!1}function n(){c.removeClass(r.__closeButton,v.CLASS_DRAG),c.unbind(window,"mousemove",e),c.unbind(window,"mouseup",n)}function i(s){return s.preventDefault(),t=s.clientX,c.addClass(r.__closeButton,v.CLASS_DRAG),c.bind(window,"mousemove",e),c.bind(window,"mouseup",n),!1}c.bind(r.__resize_handle,"mousedown",i),c.bind(r.__closeButton,"mousedown",i),r.domElement.insertBefore(r.__resize_handle,r.domElement.firstElementChild)}function wt(r,t){r.domElement.style.width=t+"px",r.__save_row&&r.autoPlace&&(r.__save_row.style.width=t+"px"),r.__closeButton&&(r.__closeButton.style.width=t+"px")}function ut(r,t){var e={};return p.each(r.__rememberedObjects,function(n,i){var s={},a=r.__rememberedObjectIndecesToControllers[i];p.each(a,function(o,h){s[h]=t?o.initialValue:o.getValue()}),e[i]=s}),e}function _e(r){for(var t=0;t<r.__preset_select.length;t++)r.__preset_select[t].value===r.preset&&(r.__preset_select.selectedIndex=t)}function $t(r){r.length!==0&&ae.call(window,function(){$t(r)}),p.each(r,function(t){t.updateDisplay()})}var ge=v;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Xt="143";function Yt(r,t,e){return Math.max(t,Math.min(e,r))}class fe{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,s,a,o){let h=n[i+0],u=n[i+1],d=n[i+2],l=n[i+3];const _=s[a+0],f=s[a+1],m=s[a+2],g=s[a+3];if(o===0){t[e+0]=h,t[e+1]=u,t[e+2]=d,t[e+3]=l;return}if(o===1){t[e+0]=_,t[e+1]=f,t[e+2]=m,t[e+3]=g;return}if(l!==g||h!==_||u!==f||d!==m){let b=1-o;const y=h*_+u*f+d*m+l*g,S=y>=0?1:-1,C=1-y*y;if(C>Number.EPSILON){const x=Math.sqrt(C),A=Math.atan2(x,y*S);b=Math.sin(b*A)/x,o=Math.sin(o*A)/x}const E=o*S;if(h=h*b+_*E,u=u*b+f*E,d=d*b+m*E,l=l*b+g*E,b===1-o){const x=1/Math.sqrt(h*h+u*u+d*d+l*l);h*=x,u*=x,d*=x,l*=x}}t[e]=h,t[e+1]=u,t[e+2]=d,t[e+3]=l}static multiplyQuaternionsFlat(t,e,n,i,s,a){const o=n[i],h=n[i+1],u=n[i+2],d=n[i+3],l=s[a],_=s[a+1],f=s[a+2],m=s[a+3];return t[e]=o*m+d*l+h*f-u*_,t[e+1]=h*m+d*_+u*l-o*f,t[e+2]=u*m+d*f+o*_-h*l,t[e+3]=d*m-o*l-h*_-u*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,s=t._z,a=t._order,o=Math.cos,h=Math.sin,u=o(n/2),d=o(i/2),l=o(s/2),_=h(n/2),f=h(i/2),m=h(s/2);switch(a){case"XYZ":this._x=_*d*l+u*f*m,this._y=u*f*l-_*d*m,this._z=u*d*m+_*f*l,this._w=u*d*l-_*f*m;break;case"YXZ":this._x=_*d*l+u*f*m,this._y=u*f*l-_*d*m,this._z=u*d*m-_*f*l,this._w=u*d*l+_*f*m;break;case"ZXY":this._x=_*d*l-u*f*m,this._y=u*f*l+_*d*m,this._z=u*d*m+_*f*l,this._w=u*d*l-_*f*m;break;case"ZYX":this._x=_*d*l-u*f*m,this._y=u*f*l+_*d*m,this._z=u*d*m-_*f*l,this._w=u*d*l+_*f*m;break;case"YZX":this._x=_*d*l+u*f*m,this._y=u*f*l+_*d*m,this._z=u*d*m-_*f*l,this._w=u*d*l-_*f*m;break;case"XZY":this._x=_*d*l-u*f*m,this._y=u*f*l-_*d*m,this._z=u*d*m+_*f*l,this._w=u*d*l+_*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],s=e[8],a=e[1],o=e[5],h=e[9],u=e[2],d=e[6],l=e[10],_=n+o+l;if(_>0){const f=.5/Math.sqrt(_+1);this._w=.25/f,this._x=(d-h)*f,this._y=(s-u)*f,this._z=(a-i)*f}else if(n>o&&n>l){const f=2*Math.sqrt(1+n-o-l);this._w=(d-h)/f,this._x=.25*f,this._y=(i+a)/f,this._z=(s+u)/f}else if(o>l){const f=2*Math.sqrt(1+o-n-l);this._w=(s-u)/f,this._x=(i+a)/f,this._y=.25*f,this._z=(h+d)/f}else{const f=2*Math.sqrt(1+l-n-o);this._w=(a-i)/f,this._x=(s+u)/f,this._y=(h+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Yt(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,s=t._z,a=t._w,o=e._x,h=e._y,u=e._z,d=e._w;return this._x=n*d+a*o+i*u-s*h,this._y=i*d+a*h+s*o-n*u,this._z=s*d+a*u+n*h-i*o,this._w=a*d-n*o-i*h-s*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,i=this._y,s=this._z,a=this._w;let o=a*t._w+n*t._x+i*t._y+s*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const h=1-o*o;if(h<=Number.EPSILON){const f=1-e;return this._w=f*a+e*this._w,this._x=f*n+e*this._x,this._y=f*i+e*this._y,this._z=f*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(h),d=Math.atan2(u,o),l=Math.sin((1-e)*d)/u,_=Math.sin(e*d)/u;return this._w=a*l+this._w*_,this._x=n*l+this._x*_,this._y=i*l+this._y*_,this._z=s*l+this._z*_,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(s),n*Math.cos(s),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class L{constructor(t=0,e=0,n=0){L.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Bt.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Bt.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*i,this.y=s[1]*e+s[4]*n+s[7]*i,this.z=s[2]*e+s[5]*n+s[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,s=t.elements,a=1/(s[3]*e+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*e+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*e+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,s=t.x,a=t.y,o=t.z,h=t.w,u=h*e+a*i-o*n,d=h*n+o*e-s*i,l=h*i+s*n-a*e,_=-s*e-a*n-o*i;return this.x=u*h+_*-s+d*-o-l*-a,this.y=d*h+_*-a+l*-s-u*-o,this.z=l*h+_*-o+u*-a-d*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i,this.y=s[1]*e+s[5]*n+s[9]*i,this.z=s[2]*e+s[6]*n+s[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,s=t.z,a=e.x,o=e.y,h=e.z;return this.x=i*h-s*o,this.y=s*a-n*h,this.z=n*o-i*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return mt.copy(this).projectOnVector(t),this.sub(mt)}reflect(t){return this.sub(mt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Yt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mt=new L,Bt=new fe;class ft{constructor(){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,i,s,a,o,h,u,d,l,_,f,m,g,b){const y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=i,y[1]=s,y[5]=a,y[9]=o,y[13]=h,y[2]=u,y[6]=d,y[10]=l,y[14]=_,y[3]=f,y[7]=m,y[11]=g,y[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/V.setFromMatrixColumn(t,0).length(),s=1/V.setFromMatrixColumn(t,1).length(),a=1/V.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,s=t.z,a=Math.cos(n),o=Math.sin(n),h=Math.cos(i),u=Math.sin(i),d=Math.cos(s),l=Math.sin(s);if(t.order==="XYZ"){const _=a*d,f=a*l,m=o*d,g=o*l;e[0]=h*d,e[4]=-h*l,e[8]=u,e[1]=f+m*u,e[5]=_-g*u,e[9]=-o*h,e[2]=g-_*u,e[6]=m+f*u,e[10]=a*h}else if(t.order==="YXZ"){const _=h*d,f=h*l,m=u*d,g=u*l;e[0]=_+g*o,e[4]=m*o-f,e[8]=a*u,e[1]=a*l,e[5]=a*d,e[9]=-o,e[2]=f*o-m,e[6]=g+_*o,e[10]=a*h}else if(t.order==="ZXY"){const _=h*d,f=h*l,m=u*d,g=u*l;e[0]=_-g*o,e[4]=-a*l,e[8]=m+f*o,e[1]=f+m*o,e[5]=a*d,e[9]=g-_*o,e[2]=-a*u,e[6]=o,e[10]=a*h}else if(t.order==="ZYX"){const _=a*d,f=a*l,m=o*d,g=o*l;e[0]=h*d,e[4]=m*u-f,e[8]=_*u+g,e[1]=h*l,e[5]=g*u+_,e[9]=f*u-m,e[2]=-u,e[6]=o*h,e[10]=a*h}else if(t.order==="YZX"){const _=a*h,f=a*u,m=o*h,g=o*u;e[0]=h*d,e[4]=g-_*l,e[8]=m*l+f,e[1]=l,e[5]=a*d,e[9]=-o*d,e[2]=-u*d,e[6]=f*l+m,e[10]=_-g*l}else if(t.order==="XZY"){const _=a*h,f=a*u,m=o*h,g=o*u;e[0]=h*d,e[4]=-l,e[8]=u*d,e[1]=_*l+g,e[5]=a*d,e[9]=f*l-m,e[2]=m*l-f,e[6]=o*d,e[10]=g*l+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(pe,t,me)}lookAt(t,e,n){const i=this.elements;return k.subVectors(t,e),k.lengthSq()===0&&(k.z=1),k.normalize(),F.crossVectors(n,k),F.lengthSq()===0&&(Math.abs(n.z)===1?k.x+=1e-4:k.z+=1e-4,k.normalize(),F.crossVectors(n,k)),F.normalize(),dt.crossVectors(k,F),i[0]=F.x,i[4]=dt.x,i[8]=k.x,i[1]=F.y,i[5]=dt.y,i[9]=k.y,i[2]=F.z,i[6]=dt.z,i[10]=k.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,s=this.elements,a=n[0],o=n[4],h=n[8],u=n[12],d=n[1],l=n[5],_=n[9],f=n[13],m=n[2],g=n[6],b=n[10],y=n[14],S=n[3],C=n[7],E=n[11],x=n[15],A=i[0],w=i[4],Q=i[8],W=i[12],Z=i[1],K=i[5],J=i[9],tt=i[13],et=i[2],nt=i[6],it=i[10],st=i[14],rt=i[3],ot=i[7],at=i[11],ht=i[15];return s[0]=a*A+o*Z+h*et+u*rt,s[4]=a*w+o*K+h*nt+u*ot,s[8]=a*Q+o*J+h*it+u*at,s[12]=a*W+o*tt+h*st+u*ht,s[1]=d*A+l*Z+_*et+f*rt,s[5]=d*w+l*K+_*nt+f*ot,s[9]=d*Q+l*J+_*it+f*at,s[13]=d*W+l*tt+_*st+f*ht,s[2]=m*A+g*Z+b*et+y*rt,s[6]=m*w+g*K+b*nt+y*ot,s[10]=m*Q+g*J+b*it+y*at,s[14]=m*W+g*tt+b*st+y*ht,s[3]=S*A+C*Z+E*et+x*rt,s[7]=S*w+C*K+E*nt+x*ot,s[11]=S*Q+C*J+E*it+x*at,s[15]=S*W+C*tt+E*st+x*ht,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],s=t[12],a=t[1],o=t[5],h=t[9],u=t[13],d=t[2],l=t[6],_=t[10],f=t[14],m=t[3],g=t[7],b=t[11],y=t[15];return m*(+s*h*l-i*u*l-s*o*_+n*u*_+i*o*f-n*h*f)+g*(+e*h*f-e*u*_+s*a*_-i*a*f+i*u*d-s*h*d)+b*(+e*u*l-e*o*f-s*a*l+n*a*f+s*o*d-n*u*d)+y*(-i*o*d-e*h*l+e*o*_+i*a*l-n*a*_+n*h*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],d=t[8],l=t[9],_=t[10],f=t[11],m=t[12],g=t[13],b=t[14],y=t[15],S=l*b*u-g*_*u+g*h*f-o*b*f-l*h*y+o*_*y,C=m*_*u-d*b*u-m*h*f+a*b*f+d*h*y-a*_*y,E=d*g*u-m*l*u+m*o*f-a*g*f-d*o*y+a*l*y,x=m*l*h-d*g*h-m*o*_+a*g*_+d*o*b-a*l*b,A=e*S+n*C+i*E+s*x;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/A;return t[0]=S*w,t[1]=(g*_*s-l*b*s-g*i*f+n*b*f+l*i*y-n*_*y)*w,t[2]=(o*b*s-g*h*s+g*i*u-n*b*u-o*i*y+n*h*y)*w,t[3]=(l*h*s-o*_*s-l*i*u+n*_*u+o*i*f-n*h*f)*w,t[4]=C*w,t[5]=(d*b*s-m*_*s+m*i*f-e*b*f-d*i*y+e*_*y)*w,t[6]=(m*h*s-a*b*s-m*i*u+e*b*u+a*i*y-e*h*y)*w,t[7]=(a*_*s-d*h*s+d*i*u-e*_*u-a*i*f+e*h*f)*w,t[8]=E*w,t[9]=(m*l*s-d*g*s-m*n*f+e*g*f+d*n*y-e*l*y)*w,t[10]=(a*g*s-m*o*s+m*n*u-e*g*u-a*n*y+e*o*y)*w,t[11]=(d*o*s-a*l*s-d*n*u+e*l*u+a*n*f-e*o*f)*w,t[12]=x*w,t[13]=(d*g*i-m*l*i+m*n*_-e*g*_-d*n*b+e*l*b)*w,t[14]=(m*o*i-a*g*i-m*n*h+e*g*h+a*n*b-e*o*b)*w,t[15]=(a*l*i-d*o*i+d*n*h-e*l*h-a*n*_+e*o*_)*w,this}scale(t){const e=this.elements,n=t.x,i=t.y,s=t.z;return e[0]*=n,e[4]*=i,e[8]*=s,e[1]*=n,e[5]*=i,e[9]*=s,e[2]*=n,e[6]*=i,e[10]*=s,e[3]*=n,e[7]*=i,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),s=1-n,a=t.x,o=t.y,h=t.z,u=s*a,d=s*o;return this.set(u*a+n,u*o-i*h,u*h+i*o,0,u*o+i*h,d*o+n,d*h-i*a,0,u*h-i*o,d*h+i*a,s*h*h+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,s,a){return this.set(1,n,s,0,t,1,a,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,s=e._x,a=e._y,o=e._z,h=e._w,u=s+s,d=a+a,l=o+o,_=s*u,f=s*d,m=s*l,g=a*d,b=a*l,y=o*l,S=h*u,C=h*d,E=h*l,x=n.x,A=n.y,w=n.z;return i[0]=(1-(g+y))*x,i[1]=(f+E)*x,i[2]=(m-C)*x,i[3]=0,i[4]=(f-E)*A,i[5]=(1-(_+y))*A,i[6]=(b+S)*A,i[7]=0,i[8]=(m+C)*w,i[9]=(b-S)*w,i[10]=(1-(_+g))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let s=V.set(i[0],i[1],i[2]).length();const a=V.set(i[4],i[5],i[6]).length(),o=V.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),t.x=i[12],t.y=i[13],t.z=i[14],M.copy(this);const u=1/s,d=1/a,l=1/o;return M.elements[0]*=u,M.elements[1]*=u,M.elements[2]*=u,M.elements[4]*=d,M.elements[5]*=d,M.elements[6]*=d,M.elements[8]*=l,M.elements[9]*=l,M.elements[10]*=l,e.setFromRotationMatrix(M),n.x=s,n.y=a,n.z=o,this}makePerspective(t,e,n,i,s,a){const o=this.elements,h=2*s/(e-t),u=2*s/(n-i),d=(e+t)/(e-t),l=(n+i)/(n-i),_=-(a+s)/(a-s),f=-2*a*s/(a-s);return o[0]=h,o[4]=0,o[8]=d,o[12]=0,o[1]=0,o[5]=u,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=_,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,s,a){const o=this.elements,h=1/(e-t),u=1/(n-i),d=1/(a-s),l=(e+t)*h,_=(n+i)*u,f=(a+s)*d;return o[0]=2*h,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-_,o[2]=0,o[6]=0,o[10]=-2*d,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const V=new L,M=new ft,pe=new L(0,0,0),me=new L(1,1,1),F=new L,dt=new L,k=new L;typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Xt}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Xt);export{ge as G,ft as M,L as V};
